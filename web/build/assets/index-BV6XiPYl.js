!function(){const n=document.createElement("link").relList;if(!(n&&n.supports&&n.supports("modulepreload"))){for(const n of document.querySelectorAll('link[rel="modulepreload"]'))e(n);new MutationObserver(n=>{for(const t of n)if("childList"===t.type)for(const n of t.addedNodes)"LINK"===n.tagName&&"modulepreload"===n.rel&&e(n)}).observe(document,{childList:!0,subtree:!0})}function e(n){if(n.ep)return;n.ep=!0;const e=function(n){const e={};return n.integrity&&(e.integrity=n.integrity),n.referrerPolicy&&(e.referrerPolicy=n.referrerPolicy),"use-credentials"===n.crossOrigin?e.credentials="include":"anonymous"===n.crossOrigin?e.credentials="omit":e.credentials="same-origin",e}(n);fetch(n.href,e)}}();let n=null;function e(e){if(!n||!n[e]||!n[e].enabled)return;const t=n[e];document.querySelectorAll(".job-item").forEach(n=>{n.classList.remove("active"),n.dataset.job===e&&n.classList.add("active")}),function(n,e){const t=document.getElementById("job-content");if(!t)return;const o=e.progress?Math.min(e.progress.currentXP/e.progress.maxXP*100,100):0,s=!(a=e.requirements)||(void 0!==a.license&&a.license,!0);var a,i;t.innerHTML=`\n    <div class="job-content" id="${n}-content">\n      <div class="job-image">\n        ${i=e.image,i?"string"==typeof i?`<img src="${i}" alt="Job Image" onerror="this.parentElement.innerHTML=generateNoImagePlaceholder()">`:i.type&&i.type.startsWith("http")?`<img src="${i.type}" alt="Job Image" onerror="this.parentElement.innerHTML=generateNoImagePlaceholder()">`:"svg"===i.type&&i.content?i.content.startsWith("data:image/svg+xml")?`<img src="${i.content}" alt="Job Image" onerror="this.parentElement.innerHTML=generateNoImagePlaceholder()">`:`<div class="svg-container">${i.content}</div>`:"url"===i.type&&i.content?`<img src="${i.content}" alt="Job Image" onerror="this.parentElement.innerHTML=generateNoImagePlaceholder()">`:'\n    <div class="no-image-placeholder">\n      <i class="fa-solid fa-image"></i>\n      <span>Image not available</span>\n    </div>\n  ':'\n      <div class="no-image-placeholder">\n        <i class="fa-solid fa-image"></i>\n        <span>No Image</span>\n      </div>\n    '}\n      </div>\n      \n      <div class="job-details">\n        <h2>${e.position||e.name}</h2>\n        <p class="job-description">\n          ${e.description}\n        </p>\n        \n        ${function(n){if(!n||0===Object.keys(n).length)return"";let e='<div class="requirements"><h4>Requirements</h4>';return void 0!==n.license&&(n.license,e+=`\n      <div class="requirement-item requirement-met">\n        <span class="requirement-icon">âœ“</span>\n        <span>${n.license?"Valid driving license required":"No license required"}</span>\n      </div>\n    `),e+="</div>",e}(e.requirements)}\n        \n        <div class="job-stats">\n          <div class="stat">\n            <span class="stat-value">${e.progress?.level||1}</span>\n            <span class="stat-label">Current Level</span>\n          </div>\n          <div class="stat">\n            <span class="stat-value">${e.stats.payment||"$0"}</span>\n            <span class="stat-label">${e.stats.paymentLabel||"Payment"}</span>\n          </div>\n          <div class="stat">\n            <span class="stat-value">${e.stats.availability||"N/A"}</span>\n            <span class="stat-label">${e.stats.availabilityLabel||"Availability"}</span>\n          </div>\n        </div>\n        \n        <div class="progress-container">\n          <div class="progress-bar">\n            <div class="progress-fill" style="width: ${o}%"></div>\n          </div>\n          <div class="level-info">\n            <span>Level ${e.progress?.level||1}</span>\n            <span>${e.progress?.currentXP||0} / ${e.progress?.maxXP||100} XP</span>\n          </div>\n        </div>\n      </div>\n      \n      <div class="action-buttons">\n        <button class="btn btn-primary" onclick="takeJob('${n}', '${e.name}')" ${s?"":"disabled"}>\n          Take Job\n        </button>\n        <button class="btn btn-secondary" onclick="markLocation('${n}')" ${e.location?"":"disabled"}>\n          Mark Location\n        </button>\n      </div>\n    </div>\n  `}(e,t)}function t(){document.body.classList.remove("show"),fetch(`https://${GetParentResourceName()}/closeUI`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({})}).catch(n=>{})}document.addEventListener("DOMContentLoaded",function(){const n=document.querySelector(".close-btn");n&&n.addEventListener("click",t),document.body.classList.remove("show")}),window.addEventListener("message",t=>{const o=t.data;switch(o.action){case"openJobCenter":o.jobs&&o.config&&function(t,o){if(n=o,t.UI){const n=document.getElementById("ui-title"),e=document.getElementById("ui-subtitle");if(n&&t.UI.title&&(n.textContent=t.UI.title),e&&t.UI.subtitle&&(e.textContent=t.UI.subtitle),t.UI.maxWidth){const n=document.querySelector(".job-center-container");n&&(n.style.maxWidth=t.UI.maxWidth)}if(t.UI.maxHeight){const n=document.querySelector(".job-center-container");n&&(n.style.height=t.UI.maxHeight)}}t.Theme&&function(n){const e=document.documentElement;if(n.primary&&e.style.setProperty("--primary-color",n.primary),n.secondary&&e.style.setProperty("--secondary-color",n.secondary),n.background){e.style.setProperty("--background-color",n.background);const t=document.querySelector(".job-center-container");t&&(t.style.background=`rgba(${n.background})`)}if(n.gradient&&e.style.setProperty("--gradient",n.gradient),n.sidebar){const e=document.querySelector(".sidebar");e&&(e.style.background=n.sidebar)}if(n.stats&&e.style.setProperty("--job-stats",n.stats),n.ui_title&&n.ui_subtitle){const e=document.getElementById("ui-title"),t=document.getElementById("ui-subtitle");e&&(e.innerHTML=n.ui_title),t&&(t.innerHTML=n.ui_subtitle)}if(n.placeholder_h3&&n.placeholder_p){const e=document.getElementById("placeholder_h3"),t=document.getElementById("placeholder_p");e&&(e.innerHTML=n.placeholder_h3),t&&(t.innerHTML=n.placeholder_p)}n.text&&(document.body.style.color=n.text,e.style.setProperty("--text-color",n.text))}(t.Theme),function(n){const t=document.getElementById("job-list");if(!t)return;t.innerHTML="";let o=null;for(const[s,a]of Object.entries(n)){!o&&a.enabled&&(o=s);const n=document.createElement("div");n.className="job-item "+(a.enabled?"":"disabled"),n.dataset.job=s,n.innerHTML=`\n      <div class="job-icon">\n        <i class="${a.icon||"fa-solid fa-briefcase"}"></i>\n      </div>\n      <div class="job-info">\n        <h3>${a.name}</h3>\n        <p>${a.category}</p>\n      </div>\n    `,a.enabled&&n.addEventListener("click",()=>e(s)),t.appendChild(n)}o&&n[o].enabled&&e(o)}(o)}(o.config,o.jobs),document.body.classList.add("show");break;case"closeJobCenter":document.body.classList.remove("show")}}),document.addEventListener("keydown",n=>{"Escape"===n.key&&t()}),document.addEventListener("contextmenu",n=>{n.preventDefault()}),window.addEventListener("error",n=>{}),window.generateNoImagePlaceholder=function(){return'\n    <div class="no-image-placeholder">\n      <i class="fa-solid fa-image"></i>\n      <span>Image not available</span>\n    </div>\n  '},window.takeJob=function(e,t){e&&n[e]&&fetch(`https://${GetParentResourceName()}/takeJob`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({job:e,label:t})}).catch(n=>{})},window.markLocation=function(e){e&&n[e]&&fetch(`https://${GetParentResourceName()}/markLocation`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({job:e})}).catch(n=>{})};
